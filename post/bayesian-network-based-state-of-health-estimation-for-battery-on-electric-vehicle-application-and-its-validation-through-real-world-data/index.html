
<!DOCTYPE html>
<html lang="zh-CN">
<head>
 <meta name="viewport" content="width=device-width, initial-scale=1" />
<meta HTTP-EQUIV="pragma" CONTENT="no-cache"> 
<meta HTTP-EQUIV="Cache-Control" CONTENT="no-cache, must-revalidate"> 
<meta HTTP-EQUIV="expires" CONTENT="0"> 
<title>066-Bayesian Network Based State-of-Health Estimation for Battery on Electric Vehicle Application and Its Validation Through Real-World Data | Gridea</title>	

<link rel="stylesheet" href="https://xioafanwu.github.io/styles/main.css">
<script type="text/javascript">
function getCSS()
{
        datetoday = new Date();
        timenow=datetoday.getTime();
        datetoday.setTime(timenow);
        thehour = datetoday.getHours();

        if (thehour<8:00)

            display = "https://xioafanwu.github.io/media/css/night.css";

       else if (thehour>21:00)

            display = "https://xioafanwu.github.io/media/css/night.css";   

        else if (thehour>8:00)
           
            display = "https://xioafanwu.github.io/media/css/day.css";

        else if (thehour<21:00)

            display = "https://xioafanwu.github.io/media/css/day.css";
      

var css = '<';
        css+='link rel="stylesheet" href='+display+' \/';
        css+='>';
        document.write(css);
}
</script>
<link href="https://fonts.googleapis.com/css?family=Dancing+Script|Noto+Sans+SC:300|Montserrat&display=swap" rel="stylesheet">
<link href="https://at.alicdn.com/t/font_1306644_jwtuc2zzbrd.css" rel="stylesheet" />
<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<script type='text/javascript' src='https://xioafanwu.github.io/media/scripts/script.js'></script>
<link href="https://cdn.bootcss.com/animate.css/3.5.2/animate.min.css" rel="stylesheet" />
  <script src="https://cdn.bootcss.com/wow/1.1.2/wow.min.js"></script>
  <script src="https://cdn.bootcss.com/highlight.js/9.15.8/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <script>wow=new WOW({boxClass:'wow',animateClass:'animated',offset:0,mobile:true,live:true});wow.init();</script>

<script type="text/javascript">
window.onload=getCSS();
</script>


 	
</head>
<body class="post-template-default single single-post postid-70 single-format-standard">
    <div id="wrapper">
        
			
		<header id="header" class="site-header" 
		
		style="background-image: linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2)),url(https://ieeexplore.ieee.org/ielx7/6287639/9312710/9319265/graphical_abstract/access-gagraphic-3050557.jpg)"
		
		>
			<div class="site-branding">
									<h1 class="site-title"><a href="https://xioafanwu.github.io" rel="home">Gridea</a></h1>
										
					<h2 class="site-description">温故而知新</h2>
										
							</div>
			<nav id="nav-wrapper">
				<div class="container">
					<div class="nav-toggle">
						<div class="bars">
							<div class="bar"></div>
							<div class="bar"></div>
							<div class="bar"></div>
						</div>
					</div>
					<div class="clear"></div>
					<ul id="" class="dove">
		 
     			
<li>
	 
	<a  href="/"> 首页</a></li>
	
    
     			
<li>
	 
	<a  href="/archives"> 归档</a></li>
	
    
     			
<li>
	 
	<a  href="/tags"> 标签</a></li>
	
    
     			
<li>
	 
	<a  href="/post/about"> 关于</a></li>
	
    

</ul>
</li>		
		
</ul>				</div>
			</nav>
						<div class="jingge">


    

    

    

    

    

    

    

    

    

    

    

    
        </header>

		<div id="content" class="container">
			<div class="row">
	<div class="col-md-8 site-main">
				
<article id="post-70" class="post-70 post type-post status-publish format-standard hentry category-5 tag-10 tag-9 tag-11">

	
	                      
		<div class="entry-content">
			<h1 class="wow swing entry-title">066-Bayesian Network Based State-of-Health Estimation for Battery on Electric Vehicle Application and Its Validation Through Real-World Data</h1>
<div class="entry-meta">
<div class="wow bounce">
	<i class="iconfont icon-rili"> <time class="lately-a" datetime="2022-01-11 15:17:06" itemprop="datePublished" pubdate="">2022-01-11</time></i>
	          </div>
			
</span>
													 
		</div>
                  
			<div class="wow slideInLeft entry-summary song">
				<h1 id="翻译">翻译</h1>
<h2 id="摘要">摘要</h2>
<p>健康状态（SOH）的估计对于确保电动汽车（EV）应用中动力电池的高效、可靠和安全运行至关重要。然而，由于电池中发生的复杂的物理化学反应，准确估计SOH是非常困难的，特别是在现实世界的电动车应用场景中。传统的SOH估算方法，包括基于模型和数据驱动的方法，都是确定性的，无法捕捉到电池生产过程中固有的不一致性所引起的电池老化过程的随机特性。在本文中，贝叶斯网络（BN）是一种用于不确定过程的概率图形建模方法，被用于电池退化建模。其结构来自于现有的关于电池老化机制的知识。<font color=#dd0000>收集了16辆电动出租车的两年运行数据和容量校准结果，用于模型训练和验证。具体来说，提出了一个系统的数据填充程序来预测SOH估计所需的变量的缺失值。采用马尔科夫链蒙特卡洛方法从参数化的BN中生成样本用于SOH估计。结果表明，估计结果非常接近于校准的SOH，平均绝对误差低于4%。</font>&gt;所提出的方法有希望在现实世界的电动车应用中在线应用于SOH估计。</p>
<p>电化学方法通常被用来分析电池的降解机制，并揭示SOH与电池内部材料变化之间的关系。例如，Wohlfahrt-Mehrens等人[9]和Yang等人[10]分别用X射线衍射、扫描电子显微镜等电化学方法显示了电池老化时阴极和阳极材料的变化。然而，这些电化学方法是侵入性或破坏性的，不能应用于像电动汽车这样的工程应用。一个可以在不破坏电池单元的情况下进行的重要电化学方法是电化学阻抗光谱法（EIS）。在应用EIS识别电池退化方面已经做了相当多的工作[11]。然而，EIS要求使用不同频率的正弦波电流激励电池，这可能不适用于电动汽车。</p>
<p>基于模型的方法是另一种用于SOH估算的方法。他们中的大多数使用等效电路模型（ECM）而不是电化学模型，因为ECM在准确性和复杂性之间有合理的权衡[12]。例如，Zou等人[13]将容量纳入电池ECM的状态方程，并使用扩展卡尔曼滤波器（EKF）估计SOH。Li等人[14]使用三种不同的状态估计方法（粒子过滤器、EKF和最小二乘法），首先估计充电状态（SOC），然后通过累积电量除以SOC的变化得到电池容量。不幸的是，这类方法的准确性严重依赖于ECM的参数[15]，因此需要自适应识别方法来在线更新参数[16]，这大大增加了计算的负担。此外，像EKF这样的状态估计方法的使用涉及大量的矩阵运算，这使得它很难在BMS中实现实际应用[17]。</p>
<p>第三种类型的SOH估计方法是数据驱动的。例如，Käbitz等人[18], [19]通过加速寿命测试，得出了一个经验模型来描述NMC锂电池在不同的电流率、温度和放电深度（DOD）组合下的SOH衰减情况。Andre等人[20]使用最高/最低温度、SOC变化、平均电流率等作为模型输入，构建了一个基于支持向量机（SVM）的SOH回归模型。其他数据驱动的模型如神经网络[7]、回归树[21]也被应用于SOH估计。从本质上讲，这类模型利用了大量数据中SOH与电池特征（如终端电压、电流、温度等）之间复杂而固有的关系。随着大数据技术在中国电动车行业的广泛推广，大量的数据可用于训练数据驱动的模型，这就保证了训练数据具有相对广泛的覆盖面，因此得出的模型具有理想的预测性能。例如，Wang等人[22]提出了一个基于真实电动车运行数据的串联电池系统的电池不一致性评价模型，这有助于准确获取电池的SOH。She等人[23]通过分析真实世界电动车的运行数据，提出了一个基于增量容量分析和神经网络的新型电池老化评估模型。Tian等人[24]基于大规模的电动出租车GPS和交易数据，应用boxplot方法探索电池的退化。现有的研究表明，数据驱动的方法在揭示电池老化和外部因素之间的内在关系方面具有很大的潜力。</p>
<p>尽管取得了上述成就，目前的研究仍然存在一些不足之处。首先，现有研究中记录的大多数真实世界的电动车数据没有容量项，因为电池容量不能直接从车载传感器测量。因此，当基于现实世界的数据来评估电池的退化时，大多数研究使用驾驶里程来代表电池的健康状况，如参考文献[23]。[23].</p>
<ul>
<li>尽管行驶里程在某种程度上与容量衰减成正比，但它们之间的关系可能不是完全线性的，因此得出的电池老化模型或揭示的衰减机制可能并不准确。</li>
<li>其次，在重新编码真实世界中的电动车运行数据时，数据缺失和失真是不可避免的。大多数现有的研究只是放弃了这些低质量的数据。然而，在一个时间戳，通常不是所有的数据项都是缺失的，缺失的数据项可以根据它与其他观测数据之间的关系来填补。填补这些缺失的数据可以提高利用率，最大限度地发挥数据驱动模型的潜力[25]。</li>
<li>第三，大多数现有的电池老化模型是确定性的，而事实是许多电池老化影响因素是不确定的[26]。</li>
<li>此外，即使两个电池经历了完全相同的老化应力加载过程，由于生产中固有的不一致性，其容量仍然可能不同。因此，决定性的模型不能捕捉到电池退化中的概率特性。</li>
</ul>
<p>为了缓解现有的研究差距，本文利用贝叶斯网络（BN）分析了现实世界中电动出租车的电池退化情况。这项工作的主要贡献包括以下三个方面。首先，通过定期进行容量校准，<font color=#dd0000>收集了真实世界的电动车运营数据和特定阶段的容量</font>&gt;，这为深入分析提供了准确的退化评估基准。第二，为了充分挖掘数据价值，为后续的模型训练提供高质量的数据源，<font color=#dd0000>采用了单阶段马尔可夫链和半径基函数神经网络（RBF-NN）分别进行车辆相关和电池相关的数据缺失填补。</font>&gt;第三，为了结合电池老化过程中存在的不确定性特征，本文<font color=#dd0000>应用BN来捕捉不同影响因素与电池容量之间的概率因果关系</font>&gt;。因为在BN中，每个节点代表一个变量，并且每个节点都有一个特定的分布，BN中继承的这种概率描述提供了考虑变量的不确定性的能力，并提供概率分布而不是点值估计。</p>
<h2 id="数据采集和清洗">数据采集和清洗</h2>
<h3 id="a电动汽车类型">A.电动汽车类型</h3>
<p>在本研究中，使用了16辆电动汽车。所有的车都是EU260，参数如图所示。值得一提的是所有的车都是出租车。根据Ref. <font color=#dd0000>参考文献[27]和参考文献[28]，北京私人电动车的平均日行驶距离为49.8公里，而北京电动出租车的日行驶距离为117.98公里。</font>&gt;[28]，北京私人电动车的平均日行驶距离为49.8公里，而北京电动出租车的日行驶距离为117.98公里。由于出租车的日行驶距离相对于私人车辆更长，其电池在短期使用后的衰减更为明显。因此，使用出租车作为调查对象可以大大缩短必要的数据范围，同时确保电池的老化仍然是切实的。</p>
<h3 id="数据采集">数据采集</h3>
<p>为了获得高频率和高质量的电动车电池运行数据，我们在每辆被调查的电动车上安装了数据采集器，并通过车载诊断（OBD）端口将它们连接到车辆的控制器区域网络（CAN）总线，以获得与电池有关的信号，如电流、电压、SOC、温度等。数据采集器内的GPS模块可以记录车辆的位置、速度和加速度，同时收集动力电池数据。数据收集器在车辆启动后开始记录数据，在车辆关闭后停止工作。采集的数据以车辆制造商定义的信息格式，以一个行程或一个充电事件为单位存储在存储卡中。数据采集器的规格列于表2，数据采集器在被调查车辆上的安装情况见图1。</p>
<p>每个月都会拿出数据采集器的存储卡来拷贝原始数据。根据车辆制造商的设置，北汽EU260的原始数据为∗.inr格式。需要根据厂家提供的通信协议将其解码并转换为∗.xls文件。为了方便后续使用MATLAB进行数据分析，所有文件最后都转换为∗.mat格式。</p>
<p>同时，当被调查的车辆被带回来进行数据复制时，也要进行容量校准测试。测试程序如下：首先，将车辆放在测功机上进行放电。<font color=#dd0000>当车辆的SOC高于10%时，车辆被强制以100km/h的速度放电。当SOC下降到10%以下时，车辆的速度被调整为10km/h。当SOC高时使用高速是为了缩短放电时间，而当SOC低时使用低速是为了确保电池在接近放电结束时以小电流放电，这样当SOC下降到零时，电池就可以接近完全放电了。当车辆的仪表盘显示SOC为零时，放电过程停止。然后，车辆被连接到充电桩，并在车辆和充电桩之间安装一个可以记录电流交换的设备。该设备可以进行安培小时计数计算，所以当车辆充满电后，设备上显示的数值就是车辆电池组的校准容量。需要提及的是，整个测试过程是在固定温度为25◦C的气候室中进行的。固定温度是为了避免温度对容量校准的影响，使校准的SOH具有可比性。在测试之前，车辆将被放置在气候室中至少12小时，以使车辆接近温度平衡状态。</font>&gt;</p>
<p>整体的数据收集程序如图2所示。上述数据收集过程从2017年6月持续到2019年6月。最后，得到了梳理车辆运行数据和特定时间的校准能力的数据集，时间跨度为2年。</p>
<p>图3显示了三辆车的电池降解轨迹。可以看出，在实验开始时，4号车相对较新，而7号和13号车已经经历了一定程度的老化，因为4号车的SOH（定义见第4节）接近1，而7号和13号车的SOH大约为98%。此外，4号车的老化过程是相对均匀的，而7号车在后期会遇到更快的电池退化。对于13号车，它在早期和最后的实验阶段退化得很快，而在中期阶段则很慢。不同的电池老化轨迹可能与电动车的不同驾驶模式和使用方式有关。这样的观察确保了数据集相对丰富，涵盖了动力电池的不同使用方式，因此开发的模型将具有更强大的泛化能力图3显示了三辆车的电池退化轨迹。</p>
<p>在本研究中，以下电池SOH估算所需的测量数据项包括车辆加速度a、车辆速度v、电池电流I、电池电压V、电池SOC和温度T，因此，我们重点关注这些不可缺少的数据项的填充。一般来说，上述测量数据可以分为两类，即与车辆相关的数据，包括速度和加速度；与电池相关的数据，包括电流、电压、SOC和温度。</p>
<p>对于车辆相关的数据，如果只有速度数据缺失，其值可以根据加速度数据来填补，反之，如果只有加速度数据缺失， 则可以根据加速度数据来填补。当速度和加速度数据都缺失时, 构建一个单阶段马尔可夫链速度预测器来预测缺失的数据, 因为速度通常被认为是满足马尔可夫特性的[30] 。马尔可夫链速度预测器描述了在给定当前时间步长的速度时，下一时间步长出现特定加速度的概率。图5给出了一个基于单阶段马尔可夫链的速度预测器的例子。例如，当当前速度为15m/s时，下一个加速度的概率为49%，等于0m/s2，如图中红星标示。从图5中还可以看出，下一个加速度在0m/s附近的概率较高，这意味着车辆有更多的时间处于恒速行驶状态。在本文中，我们假设工作日有类似的速度转换风格，而周末的驾驶风格基本相同。因此，在填补工作日丢失的速度时，使用上一周周一至周五的速度数据计算的速度预测器。对于周末丢失的速度也是如此。一旦得到了速度预测器，就可以在下一步根据当前已有的速度值，用蒙特卡洛方法[31]生成缺失的速度，这个过程可以一直持续到所有的连续缺失数据被填补。</p>
<h3 id="数据清洗">数据清洗</h3>
<p>数据清理过程主要是针对运行数据。对于校准的能力，它是从标准实验中获得的，因此没有必要进行数据处理。</p>
<p>由于不可靠的电线连接和意外情况，数据失真和数据丢失在现实中是不可避免的。因此，一个系统而有效的数据预处理方法是必要的，它可以区分错误的数据和填补缺失的数据。对于错误数据的识别，首先要删除超出技术上可行范围的数据项目。例如，在某些情况下，记录的速度可能突然增加到150km/h以上，而相邻的速度主要在80km/h以下，这在现实世界的场景中是不可能的。<font color="#ff7500">此外，如果加速度大于4.5m/s2，我们也会认为这种记录是不可靠的，就像参考文献[29]那样</font>。[29]. 图4(a)给出了一个速度和加速度失真记录的例子。其他一些错误的数据，如Nan或不连续的数据也被删除，用于后续的数据填充。图4(b)提供了一个展示不连续度的例子。</p>
<p>还需要提到的是，为了构建基于马尔科夫链的速度预测器，需要对速度和加速度进行离散化处理。在使用速度预测器时，用最近的邻域法将速度归结为一个特定的值。例如，在图5中，速度范围（0,30m/s）被分为60个区间，加速度范围（-0.5m/s2, 0.5m/s2）被分为50个区间，这意味着在使用马尔科夫链时，只有离散的速度值，如0, 0.5m/s, 1m/s, . ，29.5m/s，30m/s和离散的加速度值如-0.5m/s2，-0.48m/s2， . 0.48m/s2, 0.5m/s2有相应的概率。如果实际速度是0.7m/s，那么在查找概率矩阵时将被视为0.5m/s，因为其值比1m/s更接近0.5m/s。</p>
<p>对于电池相关的数据，如果温度或SOC缺失，可以通过线性插值来填补，因为这两个变量变化非常缓慢。由于电池电流和电压来自不同的传感器，在我们的数据库中，不存在电流和电压数据都缺失的情况。因此，在处理与电池有关的数据缺失时，最终会归结为两种情况。一种情况是电流数据需要用电压来填补，温度和SOC是已知的；另一种情况是电压数据需要用电流来填补，温度和SOC是已知的。<font color=#dd0000>为了用观察到的其他三个变量来填补电流或电压的缺失数据，我们在RBF-NN的基础上建立了两个回归模型，分别以电流和电压作为输出，如图6所示</font>&gt;。与传统的神经网络相比，RBF-NN可以提供更多的灵活性并减少对数据集质量的依赖[32]。</p>
<p>综上所述，整体的数据清理程序如图7所示。首先，对收集到的数据进行预检，以去除失真和不可行的数据。然后，对于与车辆有关的数据，如果速度和加速度都缺失，将使用单阶段马尔可夫链预测器来填补缺失的数据。如果只有加速度或速度缺失，则将执行差分或积分计算。对于电池相关的数据，完整的部分将被用来训练RBF-NN模型，首先将电流/电压作为输出，然后与通过线性插值填充的SOC和温度一起，使用训练好的RBF-NN模型填充不完整数据集中缺失的电流或电压。最后，结合已填充的车辆相关数据和电池相关数据，可以构建完整的测量数据集，用于后续的SOH模型训练和验证。</p>
<h2 id="贝叶斯网络基础知识">贝叶斯网络基础知识</h2>
<p>贝叶斯网络，又称信念网络，是贝叶斯方法的延伸，是不确定知识表示和推理领域最有效的理论模型之一。自1988年由pearl提出以来[33]，近年来已成为一个热门话题。贝叶斯网络采用图形网络结构，直观地表达了变量的联合概率分布和条件独立性，可以大大减轻概率推理的计算负担。</p>
<h3 id="构造">构造</h3>
<p>BN是一个有向无环图（DAG），由代表变量的结点和连接这些结点的有向边组成。有向边由从父节点到子节点的箭头表示。图8展示了一个BN的例子。通常用B&lt;G，P&gt;来表示BN，其中B是贝叶斯的简称，G代表图，P是概率的简称。因此，可以看出，BN是由两部分组成的。</p>
<h3 id="近似推理方法">近似推理方法</h3>
<p>BN推理是一个利用其表达的条件独立性来计算概率的过程。目前，主要的精确推理算法包括多树传播、悬崖树传播、图还原和组合优化[34]。尽管BN因其有效性和坚实的概率论基础而被认为是最好的不确定推理方法之一，但由于对于复杂的结构，BN的精确推理是一个NP难题，因此BN推理的研究重点转向了近似推理算法。马尔科夫链蒙特卡洛（MCMC）是最常用的BN近似推理方法之一[35]，它使用随机数发生器根据BN的CPD生成一组样本。然后通过处理样本而不是直接使用联合概率分布来获得要计算的概率的近似值。因为对于本文开发的BN来说，有20个节点，这使得精确的推理非常耗时。因此，采用MCMC来计算估计容量值的后验分布。</p>
<p>MCMC的基本思想是构建一个马尔科夫链，使其稳定分布是待估计参数的后验分布。后验分布的样本通过马尔科夫链产生，当马尔科夫链达到稳定分布时，基于有效样本进行蒙特卡洛积分。设φ表示采样空间，n为产生的总样本数，M为链达到稳定状态时的样本数，MCMC算法的流程图见表3。</p>
<h2 id="贝叶斯网络构建和可变概率密度函数类型确定">贝叶斯网络构建和可变概率密度函数类型确定</h2>
<p>在本节中，首先我们构建了用于电池退化分析的BN。BN结构是根据现有的关于电池老化机制和车辆系统动力学的研究结果中的物理方程确定的。在建立BN结构后，根据对每个变量的独特特征的分析，为其选择适当的分布类型。</p>
<h3 id="贝叶斯网络构建">贝叶斯网络构建</h3>
<p>在本文中，我们使用电池容量作为退化评估的指标。因此，SOH变量QN被定义为电池当前容量Q与其初始容量Q0的比值，在这里被用来表示电池的老化状态。根据参考文献容量衰退可以表达为下式。其中α和β是描述电池老化与SOC关系的参数。Eais活化能。η是C-速率参数。I是电池电流。T代表温度。R是摩尔气体常数，选定为8.314J/（mol-K）。Ah代表总安培小时的吞吐量。ζ是功率因子，它描述了电池老化与Ah的关系。根据上面的描述，表中的BN。5步骤1可以构建。其中Pbre代表电池电量，V是电池电压。因此，我们可以在表5步骤1中的BN上再增加三条有向边，如表5步骤2中的红色标记。蓄电池功率可以表示为驱动时的辅助功率Paux和驱动功率Pww之和，以及充电时的辅助功率Paux和充电功率Pg之和。这里，引入了一个触发参数kt来决定选择哪一个，即驱动功率Pwor和充电功率Pg。与上述描述相对应的BN显示在表5第3步。通过不断地等价代换，可以得出全面描述电池降解过程中不同因素之间的内在关系。</p>
<h3 id="参数分布">参数分布</h3>
<p>当确定了贝叶斯网络的结构后，需要确定所有节点变量的类型。对于变量QN和SOC，它们的值在0和1之间。因此，Beta概率分布函数（PDF）是一个定义在0和1之间的连续分布，适合这两个变量。对于变量Ah、V和v，它们肯定是正数。因此，Gamma PDF，只在正值范围内有概率分布，对这些变量是合适的。对于参数I，它主要集中在正的小数值上，而在大数值上有轻微的机会分布。因此，我们选择Rayleigh PDF。对于参数kt，它是一个选择器，只有两点的概率分布，即1代表驾驶，0代表充电。因此，选择离散伯努利分布。对于参数Pvr，它包括与车辆有关的参数和与环境有关的参数。与车辆有关的参数可以被认为是常数，因为它们只取决于车辆的物理属性。对于与环境有关的参数，如道路倾斜度θ和滚动阻力系数f，因为很难得到这些参数的精确分布，为了简单起见，我们在本文中把它们作为常数。对于参数α、β、ε、ζ、η和Ea，它们只取决于e电池的化学特性，因此可以被视为常数。对于变量T、Pg、Pb、Pw、a，它们的分布没有明显的特征，因此对这些变量选择正态PDF。以下表6总结了所有变量和参数的分布类型。</p>
<h2 id="模型训练和验证">模型训练和验证</h2>
<p>图9展示了拟议的基于贝叶斯网络的容量估计方法的框架。首先，收集电动汽车的实际运行数据并进行预处理，以去除不可行的数值。第2节中的系统数据填充程序被用来预测缺失的数据，并获得完整的数据集用于以后的训练和验证。然后，根据现有的关于电池退化和车辆系统动力学的知识构建贝叶斯网络，一般来说，贝叶斯网络节点由四种变量组成，即可测量的数据、老化/驾驶员行为/机械参数和其他变量。为所有的变量和参数选择适当的分布类型。之后，用完整的训练数据对BN模型进行训练，得到参数化的BN。最后，应用MCMC方法生成后验分布样本，用于能力估计。使用的验证数据被处理成稀疏化，以应用Metropolis-Hasting算法。在样本数量满足混合状态标准后，收集容量样本来拟合Beta分布，模式值被视为估计结果。</p>
<p>建议框架的第一步是数据清理，主要包括车辆相关数据和电池相关数据的填充。填充车辆相关数据的最重要部分是单阶段马尔可夫链速度预测器。为了验证其有效性，我们对一个特定的行程进行了速度预测测试，如图10所示，预测范围是提前5步。从图10(a)可以看出，预测的速度非常接近实际值，因为代表估计结果的红线与代表实际速度的蓝线基本重合。</p>
<p>为了验证所提出的基于RBF-NN的电池电流和电压填充方法的有效性，图11显示了图10中相同行程的电流和电压估计结果。 从图11可以看出，估计值非常接近真实值。电流和电压估计结果的均方根误差分别为2.3A和3.7V，这说明RBF-NN可以捕捉到电池复杂的物理化学关系中涉及的内在非线性关系。经过数据清理后的完整数据被用来训练和测试所开发的模型。在训练阶段，模型得到温度、速度、加速度、电流、电压和校准的SOH作为输入，并计算中间变量的后验分布，如Ah、SOC、所需功率和模型参数α、β、ε、ζ、η和Ea。在这一阶段，最大似然估计方法[37]被用来寻找使所有列车数据集合发生率最大化的最佳模型参数。验证阶段，它使用参数和输入，在没有测量的SOH数据的情况下，用MCMC方法估计容量衰减。</p>
<p>然而，当实施MCMC方法以获得估计变量的后验分布时，有必要为后续迭代指定初始值。对于涉及α、β、ε、ζ、η和Ea的与电池老化有关的常量变量，它们是根据工程经验和现有的研究结果确定的[38]。它们的初始值需要确保对样品的容量衰减估计在可行的范围内。对于变量SOC、Pb、Pw和Paux，它们是根据电动汽车的使用模式决定的。用高出现概率的值来初始化这些变量是比较合适的。参数Pvris根据车辆的基本属性参数选择，参数kt设置为1，因为在大多数情况下，车辆处于行驶状态。由于数据采集器以10Hz的频率记录了电动车的运行数据，相邻的数据之间有很强的相关性，因此概率的乘法将导致一个明显的小数量，这使得Metropolis-Hasting算法难以接受新的生成样本。为了解决这个问题，我们通过取相邻数据的平均值来代表整个数据集，对输入的观察数据进行疏散。在这里，有必要专门规定平均运算窗口的长度。因为序列数据的自相关可以按照以下方式计算。 一般认为，当自相关小于0.2时，数据点可以被认为是不相关的。在开发的BN中，观察数据主要是指车辆的速度、加速度和测量的环境温度。图12显示了不同滞后期的加速度样本的自相关情况。可以看出，当数据间隔滞后等于或大于70时，数据的自相关可以小于0.2。这一观察结果也适用于速度和温度数据。</p>
<p>在应用MCMC时，另一件重要的事情是决定是否有足够多的样本被生成，使样本服从马尔可夫链的静止分布，这也被称为生成的样本已经进入''混合'' 状态。图13展示了生成样本的混合状态。由于初始状态可能严重偏离真实值，如果只生成了少数样本，并将其用于估计变量，估计结果可能不准确。因此，有必要确定你从哪个样本开始，作为静止分布的样本。</p>
<p>图14显示了在不同的老化状态下，用两组不同的初始参数对变量健康状况QN进行的平均估计。可以看出，当起点等于100或1000时，不同初始值的估计结果是非常不同的（它们偏离了对角线），这意味着没有达到混合状态，因为如果样本已经进入混合状态，所有的样本都来自同一个静止分布，所以估计结果应该是相同的。然而，当起点等于5000或10000时，不同初始化参数的估计结果相似，这意味着生成的样本已经混合。因此，在下面的分析中，我们把5000作为起点指数。还需要提到的是，这里使用的估计窗口长度（在图13中用粉色表示）被设定为1000。它的长度也是通过与混合状态的起点类似的方法确定的。</p>
<p><font color=#dd0000>为了验证所提方法的有效性，首先我们用数据来训练模型，然后用MCMC方法产生1000个样本来估计被调查车辆的电池的SOH。这里需要提到的是，用于模型训练的数据包含了除被调查车辆以外的所有电动出租车的数据，这意味着要验证该方法的泛化能力。</font>&gt;图15给出了一个在特定老化状态下生成的一个特定车辆样本的Beta分布拟合的例子。可以看出，低于80%的分布值是相当罕见的，因为没有一个训练数据包含低于80%的SOH。因此，BN给出的估计值只包含SOH低于80%的稀缺点，这可能是由于BN在遍历马尔可夫链时的泛化功能造成的。因为Beta分布是一组定义在（0，1）区间的连续概率分布。贝塔分布的PDF为。</p>
<p>图16展示了图15中相同的特定车辆在两年实验期间的SOH估算结果。在图中，红色的星代表容量校准实验给出的SOH值，而蓝色的线表示估计的结果。圆圈对应于拟合的Beta分布的模式值，而上、下截断线与模式值的距离为1/10的差异。从图中可以看出，所有的实验校准值都分布在估计范围内（M-1 10σ，M +110σ）。这一观察结果表明，在整个电池退化期间，模型的训练和参数的使用是成功的。同样有趣的是，随着电池的退化，估计方差也在同步增加。随着电池的老化，电池的不一致性将逐渐变得明显，这意味着SOH的分散性将扩大。这一特性也隐藏在收集的训练数据中，在训练过程中，模型成功地捕捉到了这一内在特性，并在预测过程中表现出来。图17显示了所提出的基于BN的容量估计模型在不同车辆上的表现。决定系数R2和平均绝对误差（MAE）被用来评估预测的准确性，其定义如下。</p>
<h2 id="结论">结论</h2>
<p>本文提出了一个基于BN的SOH估计框架，以描述电池退化过程中固有的随机特性，并通过电动出租车的实际运行数据集进行验证。对于模型部分，现有的关于电池老化机制的研究结果被用来构建BN结构，并为所有的变量和参数选择适当的分布类型。在数据部分，为了应对不可避免的数据缺失问题，如不可靠的电线连接，提出了一个系统的数据填充程序，应用单阶段马尔可夫链来填充车辆相关数据，采用RBF-NN来填充电池相关数据。然后用完整的数据训练BN模型。数据的稀疏性和混合状态的确定被应用于MCMC方法，该方法产生的样本服从于SOH估计的后验分布。结果表明，该模型可以捕捉到电池老化过程中SOH分散的增加趋势。估计的SOH范围可以完全覆盖不同老化阶段的标定SOH。</p>
<p>目前，所提出的方法只能用于根据历史运行数据来估计当前时间的电池SOH。它不具备预测未来SOH变化的能力，因此不能直接用于剩余使用寿命（RUL）的预测。如果要用于剩余寿命预测，需要在目前提出的基于BN的SOH估计框架中加入另一个可以预测电池未来工作条件的模型，这也是我们未来工作的最重要方向之一。</p>
<h1 id="总结">总结</h1>
<ol>
<li>解决的问题，研究的意义：现有的基于里程的实车健康指标不准确；而且老化模型都是确定的，但实际上应该是不确定的，此外，现有的数据预处理直接删除缺失数据帧，数据浪费。使用马尔科夫链补充了车速数据，使用[[神经网络]，填补电池数据。使用马尔科夫链-蒙特卡洛方法生成验证集。</li>
<li>技术：[[贝叶斯网络]]，[[马尔科夫链]] ，[[马尔卡夫-蒙特卡洛方法]]</li>
<li>知识：
<ol>
<li>北京私家车和出租车平均运行里程。</li>
<li>数据预处理：删除了加速度过大的数据</li>
<li>车速满足马尔可夫链</li>
</ol>
</li>
<li>通过了标定实验</li>
</ol>

							</div>
	<div class="wow bounceInDown vt-post-tags">
 
				<a href="https://xioafanwu.github.io/tag/J3S6mV-e9/" rel="tag">实车数据</a>	
				 
				<a href="https://xioafanwu.github.io/tag/zKU83yZ35U/" rel="tag">贝叶斯网络</a>	
				 
				<a href="https://xioafanwu.github.io/tag/BgIc8siRCe/" rel="tag">蒙特卡洛马尔科夫链</a>	
				 
				<a href="https://xioafanwu.github.io/tag/2QwBnzlAd/" rel="tag">电池健康状态估计</a>	
				 
					</div>						
<nav class="navigation3 post-navigation3" role="navigation">
		
		<div class="nav-links3">
      
		 
		<div class="wow bounceInRight nav-next3"><a href="https://xioafanwu.github.io/post/065-a-new-suitable-feature-selection-and-regression-procedure-for-lithium-ion-battery-prognostics/" rel="next"> 065-A new suitable feature selection and regression procedure for lithium-ion battery prognostics</a></div>
		
		</div>
	</nav>
	<div class="wow rollIn author-info" style="visibility: visible; animation-name: rollIn;">
	<div class="author-avatar pull-left"><img src="https://xioafanwu.github.io/images/avatar.png" ></div>
 
	<div class="author-description"><div class="author-title"><div class="author-link" rel="author">LSG</div></div>


	<p class="author-bio">To be what you want to be</p></div></div>
	
		</div>
		
 
		
</article>

<div id="marlin_lite_about_widget-2" class="wow bounceInUp widget marlin_lite_about_widget" data-wow-delay="0.1s">
		
        
		<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src='https://xioafanwu.github.io/media/scripts/Valine.min.js'></script>

<div class="comment"></div>
<script>
        new Valine({
            // AV 对象来自上面引入av-min.js(老司机们不要开车➳♡゛扎心了老铁)
            av: AV, 
            el: '.comment',
            lang: 'zh-cn',
            
            admin_email:'xiaofanwu2018@gmail.com',
            
            
            emoticon_url: 'C:\Users\xiaofan\OneDrive - bit.edu.cn\Documents\Gridea\images\avatar.png',
             
      emoticon_list: ["吐.png","喷血.png","狂汗.png","不说话.png","汗.png","坐等.png","献花.png","不高兴.png","中刀.png","害羞.png","皱眉.png","小眼睛.png","中指.png","尴尬.png","瞅你.png","想一想.png","中枪.png","得意.png","肿包.png","扇耳光.png","亲亲.png","惊喜.png","脸红.png","无所谓.png","便便.png","愤怒.png","蜡烛.png","献黄瓜.png","内伤.png","投降.png","观察.png","看不见.png","击掌.png","抠鼻.png","邪恶.png","看热闹.png","口水.png","抽烟.png","锁眉.png","装大款.png","吐舌.png","无奈.png","长草.png","赞一个.png","呲牙.png","无语.png","阴暗.png","不出所料.png","咽气.png","期待.png","高兴.png","吐血倒地.png","哭泣.png","欢呼.png","黑线.png","喜极而泣.png","喷水.png","深思.png","鼓掌.png","暗地观察.png"],
     	
      	
          
        });
    </script> 


   
  
 

		</div>

			</div>
			


<div class="tocc col l3 hide-on-med-and-down">
	
        <div class="toc-widget">
			
            <div class="toc-title"></div>
			
            <div id="toc-content">
			
			
			</div>
        </div>
    </div>


<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.5.0/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '.entry-summary',
            headingsOffset: -($(window).height() * 0.4 - 45),
            // headingsOffset: -205,
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('.entry-summary').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });
    });
</script>										 

 
       


			</div>
		</div>

		
		 	<footer id="colophon" class="site-footer">

			<div class="container">
	
				<div class="copyright">Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a><br>Theme:   <a href="https://github.com/alterfang/gridea-theme-pan" target="_blank" title="Pan"><span>Pan</span></a>. Powered by <a href="https://gridea.dev/" target="_blank" title="Gridea"><span>Gridea</span></a></div>		
			</div>
		
		</footer>

</div>

<script src="https://cdn.bootcss.com/fitvids/1.2.0/jquery.fitvids.min.js"></script>
<script type='text/javascript' src='https://xioafanwu.github.io/media/scripts/marlin-scripts.js'></script>
 <script src="//tokinx.github.io/lately/lately.min.js"></script>
  <script>jQuery(document).ready(function(){$.lately({'target':'.lately-a,.lately-b,.lately-c'})});</script>
  <style type="text/css">a.back_to_top {
    text-decoration: none;
    position: fixed;
    bottom: 40px;
    right: 30px;
    background: #f0f0f0;
    height: 40px;
    width: 40px;
    border-radius: 50%;
    line-height: 36px;
    font-size: 18px;
    text-align: center;
    transition-duration: .5s;
    transition-propety: background-color;
    display: none;
}

a.back_to_top span {
    color: #888;
}

a.back_to_top:hover {
    cursor: pointer;
    background: #dfdfdf;
}

a.back_to_top:hover span {
    color: #555;
}

@media print, screen and (max-width: 580px) {
    .back_to_top {
        display: none !important;
    }
}



</style><a id="back_to_top" href="#" class="back_to_top"><span><i class="iconfont icon-xiangshang"></i></span>
</a>


<script>$(document).ready((function(_this) {
  return function() {
    var bt;
    bt = $('#back_to_top');
    if ($(document).width() > 480) {
      $(window).scroll(function() {
        var st;
        st = $(window).scrollTop();
        if (st > 30) {
          return bt.css('display', 'block');
        } else {
          return bt.css('display', 'none');
        }
      });
      return bt.click(function() {
        $('body,html').animate({
          scrollTop: 0
        }, 800);
        return false;
      });
    }
  };
})(this));
</script>

		<script data-no-instant>
    (function ($) {
        $.extend({
            adamsOverload: function () {
                $('.navigation:eq(0)').remove();
                $("").attr("rel" , "external");
                $("a[rel='external'],a[rel='external nofollow']").attr("target","_blank");
                $("a.vi").attr("rel" , "");
                $.viewImage({
                    'target'  : 'img',
                    'exclude' : '.vsmile-icons img,.gallery img',
                    'delay'   : 300
                });
                $.lately({
                    'target' : '.commentmetadata a,.infos time,.post-list time'
                });
                prettyPrint();
                
                $('ul.links li a').each(function(){
                    if($(this).parent().find('.bg').length==0){
                        $(this).parent().append('<!---<div class="bg" style="background-image:url(https://c3.glgoo.top/s2/favicons?domain='+$(this).attr("href")+')"></div>--->')
                    }
                });
            }
        });
    })(jQuery);
    jQuery.adamsOverload();
</script>

</body>
</html>
